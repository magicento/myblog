/*!
	photobox v1.0.3
	(c) 2012 Yair Even Or <http://dropthebit.com>

	based (~15%) on Picbox v2.2 from:
	(c) 2010 Ben Kay <http://bunnyfire.co.uk>

	which is by itself based on code from Slimbox v1.7 - The ultimate lightweight Lightbox clone
	(c) 2007-2009 Christophe Beyls <http://www.digitalia.be>

	Uses jQuery-mousewheel Version: 3.0.6
	(c) 2009 Brandon Aaron <http://brandonaaron.net>

	MIT-style license.
*/
(function(B,f){var S=B(window),s,b=[],C,G,T=-1,m,F,R,N,L,t,z="",O="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",h=jQuery.browser.msie&&B.browser.version<10,y,I,q,w=B(),k={},r=new Image(),W=new Image(),V,D,c,l,v,K,E={loop:true,thumbs:true,counter:true,title:true,hideFlash:true,keys:{close:"27, 88, 67",prev:"37, 80",next:"39, 78"}};B(f).ready(function(){B(f.body).prepend(B([V=B('<div id="pbOverlay">').hide().on("click",Q).append(imageWrap=B('<div class="pbLoader"><b></b><b></b><b></b></div>'),l=B('<div id="pbPrevBtn" class="prevNext"><b></b></div>').on("click",u),v=B('<div id="pbNextBtn" class="prevNext"><b></b></div>').on("click",u),imageWrap=B('<div class="imageWrap">').append(c=B("<img>")[0])[0],D=B('<div id="pbCloseBtn">').append("<b>Ã—</b>").on("click",Q)[0],K=B('<div id="pbCaption">').append('<div class="title">').append('<div class="counter">'))[0],]));y=n("transformOrigin")});B.photobox=function(Y,i){s=B.extend(E,i||{});h&&B(V).addClass("msie");j(1);if(b.length<2){K.find(".counter").remove()}return a(Y,true)};B.fn.photobox=function(i,Z){G=this;G=G.filter(function(aa){var ab=this;if(!ab.firstChild||!ab.firstChild.tagName||ab.firstChild.tagName.toLowerCase()!="img"){return false}else{b.push([ab.href,ab.firstChild.getAttribute("alt")||ab.firstChild.getAttribute("title")])}return true});if(E.thumbs||i.thumbs){M(G)}B(this.context).on("click",this.selector,Y);function Y(aa){aa.preventDefault();if(b.length<2){l.add(v).remove()}t=f.documentElement;return B.photobox(B.inArray(this,G),i)}return this};function M(Y){C=B("<div>").addClass("pbThumbs");var i=B("<ul>").appendTo(C);C.appendTo(K);Y.each(function(){B("<li>").append(B(this).clone()).appendTo(i)});B(V).addClass("thumbs");C.on("click","a",x).data("a",C.find("a"))}function x(Y){Y.preventDefault();w.removeClass("active");w=B(this).parent().addClass("active");var i=B.inArray(this,B(Y.delegateTarget).data("a"));return a(i,0,1)}function n(ab){var Z,aa=f.body.style,Y=["ms","O","Moz","Webkit"];if(aa[ab]==""){return ab}ab=ab[0].toUpperCase()+ab.slice(1);for(Z=Y.length;Z--;){if(aa[Y[Z]+ab]==""){return(Y[Z]+ab)}}}function j(i){if(i){c.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}B(c).css({transition:"0s"}).removeAttr("style");B(V).show().addClass("show");B(V).on("click","img",function(Z){Z.stopPropagation()});B(V).on(O,function(){B(c).addClass("zoomable");B(V).off(O).addClass("on")});if(h){B(V).trigger("MSTransitionEnd")}if(s.hideFlash){B.each(["object","embed"],function(Z,aa){B(aa).each(function(){if(i){this._picbox=this.style.visibility}this.style.visibility=i?"hidden":this._picbox})})}var Y=i?"on":"off";B(f)[Y]({"keydown.photobox":o,"mousewheel.photobox":g});if(s.thumbs){w.removeAttr("class");B(S).on("resize.photobox",X);X()}}function X(){I=C[0].clientWidth;q=C[0].firstChild.clientWidth;var i=q>I?"on":"off";C[i]("mousemove",e)}function e(Y){var i=q/I;C[0].scrollLeft=Y.pageX*i-500}function o(aa){var Z=aa.keyCode,Y=s.keys,i;return Y.close.indexOf(Z)>=0&&Q()||Y.next.indexOf(Z)>=0&&u("next")||Y.prev.indexOf(Z)>=0&&u("prev")||true}function u(Z){if(B(pbOverlay).hasClass("hide")){return false}var Y=(this.id=="pbPrevBtn"||Z=="prev")?F:R,i=C.css("clear")=="both";return a(Y,0,i)}function a(i,Z,Y){if(i>=0){T=i;m=b[i][0];F=(T||(s.loop?b.length:0))-1;R=((T+1)%b.length)||(s.loop?0:-1);p();B(V).addClass("pbLoading");!s.loop&&i==b.length-1?v.addClass("hide"):v.removeClass("hide");!s.loop&&i==0?l.addClass("hide"):l.removeClass("hide");if(s.thumbs){J(i,Z,Y)}if(F>=0){r.src=b[F][0]}if(R>=0){W.src=b[R][0]}s.counter&&K.find(".counter").text("( "+(T+1)+" / "+b.length+" )");s.title&&K.find(".title").text(b[i][1]);k=new Image();k.onload=function(){H(Z)};k.src=m}return false}function J(Y,i,Z){w.removeClass("active");w=C.find("li").eq(Y).addClass("active");if(Z){return}var aa=w[0].offsetLeft+w[0].clientWidth/2-t.clientWidth/2;i&&C.delay(800);!i&&C.stop();C.animate({scrollLeft:aa},500,"swing")}function H(Y){if(!Y){B(c).on(O,i);B(V).addClass("hide");h&&i()}else{i()}function i(){B(c).css({transition:"0s"}).attr("class","prepare").hide().off(O);B(V).removeClass("hide");B(c).attr("src",m);setTimeout(function(){B(c).removeAttr("style");setTimeout(function(){c.className=""},0)},0)}B(V).removeClass("pbLoading")}function g(Y,aa){var Z=B(c).data("zoom")||1,i=c.getBoundingClientRect();Z=Z+(aa/10);if(Z<0.1){Z=0.1}B(c).data("zoom",Z).css({transform:"scale("+Z+")"});if(i.height>t.clientHeight||i.width>t.clientWidth){B(f).on("mousemove.photobox",d)}else{B(f).off("mousemove.photobox");c.style[y]="50% 50%"}return false}function d(aa){var ab=(aa.clientY/t.clientHeight)*(t.clientHeight+200)-100,Y=ab/t.clientHeight*100,Z=aa.clientX/t.clientWidth*100,i=Z+"% "+Y+"%";c.style[y]=i}function p(){k.onload=function(){};k.src=r.src=W.src=m}function Q(){p();T=F=R=-1;B(document).off("mousemove");j();B(V).addClass("hide");B(c).on(O,i);h&&i();function i(){B(V).removeClass("show hide on");B(c).removeAttr("class").removeAttr("src").removeAttr("style").off().data("zoom",1);if(jQuery.browser.msie){setTimeout(function(){B(V).hide()},200)}}setTimeout(i,500);return false}
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
	 * Licensed under the MIT License (LICENSE.txt).
	 *
	 * Version: 3.0.6
	 */
var P=["DOMMouseScroll","mousewheel"];if(B.event.fixHooks){for(var U=P.length;U;){B.event.fixHooks[P[--U]]=B.event.mouseHooks}}B.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var Y=P.length;Y;){this.addEventListener(P[--Y],A,false)}}else{this.onmousewheel=A}},teardown:function(){if(this.removeEventListener){for(var Y=P.length;Y;){this.removeEventListener(P[--Y],A,false)}}else{this.onmousewheel=null}}};B.fn.extend({mousewheel:function(i){return i?this.bind("mousewheel",i):this.trigger("mousewheel")},unmousewheel:function(i){return this.unbind("mousewheel",i)}});function A(ac){var aa=ac||window.event,Z=[].slice.call(arguments,1),ad=0,ab=true,Y=0,i=0;ac=B.event.fix(aa);ac.type="mousewheel";if(aa.wheelDelta){ad=aa.wheelDelta/120}if(aa.detail){ad=-aa.detail/3}i=ad;if(aa.axis!==undefined&&aa.axis===aa.HORIZONTAL_AXIS){i=0;Y=-1*ad}if(aa.wheelDeltaY!==undefined){i=aa.wheelDeltaY/120}if(aa.wheelDeltaX!==undefined){Y=-1*aa.wheelDeltaX/120}Z.unshift(ac,ad,Y,i);return(B.event.dispatch||B.event.handle).apply(this,Z)}})(jQuery,document);